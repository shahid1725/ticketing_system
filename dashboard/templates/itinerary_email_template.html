<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Itinerary Email</title>
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}" />
    <link rel="stylesheet" href="{% static 'css/dashboard2.css' %}" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <style>
        .it1 {
            width: 13rem;
        }

        .it2 {
            width: 20rem;
            object-fit: contain;
            margin-left: auto;
        }

        .tb1 {
            margin-left: 5rem;
        }

        .nm3 {
            position: absolute;
            bottom: 7rem;
            width: 100%;
        }

        .nm5>* {
            font-size: 0.8rem;
        }
        .itinery-email-table {
            max-width: 80%;
            margin:auto;
            margin-top:2rem
        }

        @media(max-width:500px) {
            .it1 {
                width: 5rem;
                object-fit: contain;
            }

            .it2 {
                width: 6rem
            }

            .tb1 {
                margin-left: 1rem;
            }

            .nm3 {
                bottom: 2.5rem;
            }

            .nm3 input {
                height: 22px;
                font-size: 0.5rem;
            }

            .nm5>* {
                height: 22px;
                font-size: 0.4rem;
                white-space: nowrap;
            }
            .itinery-email-table {
                max-width: 90%;
                margin:auto;
                margin-top:2rem
            }
             .itinery-email-table h5 {
                font-size: 1rem;
                margin: 0;
             }
        }
    </style>
</head>

<body>
    <div class="d-flex justify-content-center pt-2">
        <button class="theme-btn px-3 py-2 rounded-1" id="downloadButton">Download</button>
    </div>
    <div style="max-width: 900px;margin-inline: auto;margin-top: 2rem;">
        <span id="num-value" style="opacity: 0;">{{ itinerary.itinerary_number }}</span></td>
        <div id="itinerary-details" style="margin: auto; font-family: 'Poppins', sans-serif;">
            <div class="itinerary-content" style="box-shadow: 0px -1px 3px 1px rgb(204, 200, 200);position: relative;"
                id="page1">
                <img src="{%static 'assets/itinerary.png'%}" alt="" style="max-width: 100%;">

                <div class="nm3" style="margin-bottom: 2rem;">
                    <div class="d-flex justify-content-center align-items-center text-center gap-3">
                        <input type="text" class="first-detail rounded-pill form-control w-75 text-center fw-semibold"
                            style="color: #324969;" readonly value="{{ itinerary.destination }}">
                        <input type="text" class="first-details rounded-pill form-control  w-75 text-center fw-semibold"
                            style="color: #324969;" readonly value="{{ itinerary.number_of_days }} Days {{ itinerary.number_of_nights }} Nights">
                    </div>
                </div>


            </div>
            <div class="itinerary-content" style="box-shadow: 0px -1px 3px 1px rgb(204, 200, 200);" id="page2">
                <div class="mt-4">
                    <div class="" style="width: 100%;">
                        <div class="p-4">
                            <div class="">
                                <p class="fw-semibold fs-5">{{ itinerary.customer.full_name }}</p>
                                <p class="align-self-center fw-medium">{{ itinerary.customer.contact_number }}</p>
                            </div>
                            <h6
                                style="border-bottom: 1px solid #324969;color: #324969;font-size: 2rem;padding-bottom: 1rem;">
                                Travel Itinerary</h6>
                        </div>
                        <div style="width: 100%;">
                            <table style="width: 100%;">

                        </div>

                        <div class="itinery-email-table px-3 px-md-5 tb1 mb-5 d-flex justify-content-center flex-column">
                            <ul id="navigodesign">

                                <div class="d-flex gap-3">
                                    <li><h6 class="f py-2" style="width: 10rem;"> No.of Guest : </h6></li>
                                    <p style="margin: 0;align-self:center;">{{ itinerary.adults }} Adults {% if itinerary.children %} {{ itinerary.children }} Childrens {% endif %}</p>
                                </div>
                          
                                <div class="d-flex gap-3 mt-3">
                                    <li> <h6 class="f py-2"style="width: 10rem;">Date : </h6></li>
                                    <p style="align-self: center;margin:0;">{{ itinerary.itinerary_date }}</p>
                                </div>

                                <div class="d-flex gap-3">
                                    <li> <h6 class="f py-2" style="width: 10rem;">No.of Nights  : </h6></li>
                                    <p style="align-self: center;margin:0;">{{ itinerary.number_of_nights }}</p>
                                </div>
                          
                                <div class="d-flex gap-3">
                                    <li> <h6 class=" py-2" style="width: 10rem;">Accommodation : </h6></li>
                                    <p style="align-self: center;margin:0;">{{ itinerary.accommodation }}</p>
                                </div>
                          
                                <div class="d-flex gap-3">
                                    <li> <h6 class="f py-2" style="width: 10rem;">Vehicle (Non Ac) : </h6></li>
                                    <p style="align-self: center;margin:0;">{{ itinerary.vehicle_type }}</p>
                                </div>

                                <div class="d-flex gap-3">
                                    <li> <h6 class="f py-2" style="width: 10rem;">Pick Up : </h6></li>
                                    <p style="align-self: center;margin:0;">{{ itinerary.start_date|date:'F j, Y - h:i A' }} {{ itinerary.pick_up_location }}</p>
                                </div>

                                <div class="d-flex gap-3">
                                    <li> <h6 class="f py-2" style="width: 10rem;">Drop : </h6></li>
                                    <p style="align-self: center;margin:0;">{{ itinerary.end_date|date:'F j, Y - h:i A' }} {{ itinerary.drop_location }}</p>
                                </div>

                                <!-- <div class="d-flex gap-3">
                                    <li> <h6 class="f py-2" style="width: 10rem;">Amount : </h6></li>
                                    <p style="align-self: center;margin:0;">50000</p>
                                </div>

                                <div class="d-flex gap-3">
                                    <li> <h6 class="f py-2" style="width: 10rem;">Advance : </h6></li>
                                    <p style="align-self: center;margin:0;">40000</p>
                                </div>

                                <div class="d-flex gap-3">
                                    <li> <h6 class="f py-2" style="width: 10rem;">Balance : </h6></li>
                                    <p style="align-self: center;margin:0;">10000</p>
                                </div> -->
                                {% if itinerary.breakfast %}
                                <div class="d-flex gap-3">
                                    <li> <h6 class="f py-2" style="width: 10rem;">Breakfast : </h6></li>
                                    <p style="align-self: center;margin:0;">{{ itinerary.breakfast }}</p>
                                </div>
                                {% endif %}
                                {% if itinerary.lunch %}
                                <div class="d-flex gap-3">
                                    <li> <h6 class="f py-2" style="width: 10rem;">Dinner : </h6></li>
                                    <p style="align-self: center;margin:0;">{{ itinerary.lunch }}</p>
                                </div>
                                {% endif %}
                                {% if itinerary.dinner %}
                                <div class="d-flex gap-3">
                                    <li> <h6 class="f py-2" style="width: 10rem;">Dinner : </h6></li>
                                    <p style="align-self: center;margin:0;">{{ itinerary.dinner }}</p>
                                </div>
                                {% endif %}

                                <div class="d-flex gap-3">
                                    <li> <h6 class="f py-2" style="width: 10rem;">Guide : </h6></li>
                                    <p style="align-self: center;margin:0;">{{ itinerary.guide_type }}</p>
                                </div>

                                {% if itinerary.visiting_place1 %}
                                <div style="margin-top: 4rem;">
                                    <p style="align-self: center;margin:0;">* {{ itinerary.visiting_place1 }}</p>
                                </div>
                                {% endif %}
                                {% if itinerary.visiting_place2 %}
                                <div>
                                    <p style="align-self: center;margin:0;">* {{ itinerary.visiting_place2 }}</p>
                                </div>
                                {% endif %}
                                {% if itinerary.visiting_place3 %}
                                <div>
                                    <p style="align-self: center;margin:0;">* {{ itinerary.visiting_place3 }}</p>
                                </div>
                                {% endif %}
                                {% if itinerary.visiting_place4 %}
                                <div>
                                    <p style="align-self: center;margin:0;">* {{ itinerary.visiting_place4 }}</p>
                                </div>
                                {% endif %}
                                {% if itinerary.visiting_place5 %}
                                <div>
                                    <p style="align-self: center;margin:0;">* {{ itinerary.visiting_place5 }}</p>
                                </div>
                                {% endif %}
                                
                        </div>





                        <div>
                            <table style="width: 100%;">
                                <tbody>
                                    <tr>
                                        <td>
                                            <p></p>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: right;padding-right: 2rem;">
                                            <div>
                                                {% if itinerary.is_per_head %}
                                                {% if itinerary.expense_per_person %}
                                                <p>Expense/person: <span style="padding-left: 0.5rem;">₹ {{itinerary.expense_per_person }}</span></p>
                                                {% endif %}
                                                {% if itinerary.expense_per_child %}
                                                <p>Expense/child: <span style="padding-left: 0.5rem;">₹ {{itinerary.expense_per_child }}</span></p>
                                                {% endif %}
                                                {% if itinerary.total_expense %}
                                                <p style="font-size: 1rem;"><strong>Total Expense: <span
                                                            style="padding-left: 0.5rem;">₹{{ itinerary.total_expense}}</span></strong></p>
                                                {% endif %}
                                                {% else %}
                                                {% if itinerary.total %}
                                                <p style="font-size: 1rem;"><strong>Total: <span
                                                            style="padding-left: 0.5rem;">₹{{ itinerary.total}}</span></strong></p>
                                                {% endif %}
                                                {% endif %}
                                            </div>
                                        </td>
                                    </tr>


                                </tbody>
                            </table>
                            <!-- <div style="margin-top: -15rem;padding-left: 5rem;">
                                <p><strong>Payment Methods</strong></p>
                                <p>Bank Name : {{ invoice.account_name.account_name }}</p>
                                <p>Bank Account :  {{ invoice.account_name.account_number }}</p>
                                <p style="margin-top: 10px;padding-bottom: 8rem;" class="fw-bold">Thank you for your
                                    business!</p>
                            </div> -->
                        </div>


                    </div>
                </div>
            </div>

            <div class="itinerary-content" style="box-shadow: 0px -1px 3px 1px rgb(204, 200, 200);" id="page3">
                <div class="px-4" style="padding-top: 7rem;padding-bottom: 6rem;margin-top:2rem;margin-bottom:7rem">
                    <h3 class="fw-bold fs-5 text-center" style="text-transform: uppercase;font-size: 0.9rem;padding-top: 8rem;padding-inline: 2rem;padding-bottom:3rem;">
                        Terms & Conditions</h3>

                    <div style="padding-inline: 1rem;text-align:justify">
                        <p style="font-size: 0.9rem;">* One third of total amount should be paid in advance.</p>
                        <p style="font-size: 0.9rem;">* Advance payment is not refundable at any circumstances.</p>
                        <p style="font-size: 0.9rem;">* Total amount excluding advance payment should be paid before
                            departure. </p>
                        <p style="font-size: 0.9rem;">* Booking date cannot be exchange at any circumstances.
                        </p>
                        <p style="font-size: 0.9rem;">* Vehicles will be exchanged in case of unexpected damages.

                        </p>
                        <p style="font-size: 0.9rem;">* Vehicles will be exchanged in case of unexpected damages.</p>
                        <p style="font-size: 0.9rem;">* Any damage to the vehicle and staycation by team members will be
                            compensated from the
                            package holder.</p>
                        <p style="font-size: 0.9rem;">* Before departure, package holder should ensure that all
                            travelers are informed with details with
                            instructions of the package. </p>
                        <p style="font-size: 0.9rem;">* Package rate will change according to the change in the number
                            of travelers. </p>
                        <p style="font-size: 0.9rem;">* Room check-in time is 14.00 & check-out time is 11.00 hrs </p>
                        <p style="font-size: 0.9rem;">* As per the latest GOI directives, all guests are requested to
                            carry a photo identity (Voters ID, driving
                            license etc.) </p>
                        <p style="font-size: 0.9rem;">* It is compulsory for foreign nationals to carry their passport
                            with valid visa or PIO card. Relevant
                            documents/copies have to produced at the time of check-in. </p>
                    </div>
                </div>

                <div style="padding-inline: 1rem;padding-bottom: 2rem;margin-top: 1.5rem;"
                class="d-flex flex-column flex-md-row  justify-content-between">
                <div>
                <img id="logo" src="{%static 'assets/logoi.png'%}" alt="" class="it1">
            </div>
                <div class="nm5" style="display:flex;justify-content:start;">
                    <div class="d-flex gap-3">
                        <div style="color: #324969;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15"
                                viewBox="0 0 24 24" fill="currentColor"
                                class="icon icon-tabler icons-tabler-filled icon-tabler-phone">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <path
                                    d="M9 3a1 1 0 0 1 .877 .519l.051 .11l2 5a1 1 0 0 1 -.313 1.16l-.1 .068l-1.674 1.004l.063 .103a10 10 0 0 0 3.132 3.132l.102 .062l1.005 -1.672a1 1 0 0 1 1.113 -.453l.115 .039l5 2a1 1 0 0 1 .622 .807l.007 .121v4c0 1.657 -1.343 3 -3.06 2.998c-8.579 -.521 -15.418 -7.36 -15.94 -15.998a3 3 0 0 1 2.824 -2.995l.176 -.005h4z" />
                            </svg>
                            <span style="font-weight: 600;">7909 151 146</span>
                        </div>
                        <div style="color: #324969;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round"
                                class="icon icon-tabler icons-tabler-outline icon-tabler-brand-instagram">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <path
                                    d="M4 4m0 4a4 4 0 0 1 4 -4h8a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-8a4 4 0 0 1 -4 -4z" />
                                <path d="M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" />
                                <path d="M16.5 7.5l0 .01" />
                            </svg>
                            <span style="font-weight: 600;">navigo_trips</span>
                        </div>
                        <div style="color: #324969;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round"
                                class="icon icon-tabler icons-tabler-outline icon-tabler-world">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0" />
                                <path d="M3.6 9h16.8" />
                                <path d="M3.6 15h16.8" />
                                <path d="M11.5 3a17 17 0 0 0 0 18" />
                                <path d="M12.5 3a17 17 0 0 1 0 18" />
                            </svg>
                            <span style="font-weight: 600;">www.navigotrips.com</span>
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>

<script>
    const numValue = document.getElementById('num-value').textContent;
document.getElementById("downloadButton").addEventListener("click", function () {
    const element = document.getElementById("itinerary-details");
    const tb1 = document.getElementsByClassName('tb1')[0];
    const input = document.querySelector('.nm5 >*');
    const logo = document.getElementById('logo');
    const firstDetail = document.getElementsByClassName('first-detail')[0];
    const firstDetails = document.getElementsByClassName('first-details')[0];
    const opt = {
        filename: `${numValue}.pdf`,
        image: { type: 'jpeg', quality: 1 },
        html2canvas: { scale: 1.5 },
        jsPDF: { unit: 'in', format: [8.5, 12], orientation: 'portrait' },
    };

    // Check if the screen width is less than or equal to 768px
    if (window.innerWidth <= 768) {
        firstDetail.style.paddingBottom = '20px';
        firstDetails.style.paddingBottom = '20px';
    }

    tb1.style.marginLeft = '0rem';
    input.style.fontSize = '1rem';
    logo.style.width = '12rem';

    html2pdf().from(element).set(opt).save().then(() => {
        // Revert styles after PDF generation if screen width is less than or equal to 768px
        if (window.innerWidth <= 768) {
            firstDetail.style.paddingBottom = '';
            firstDetails.style.paddingBottom = '';
        }
    });
});

</script>





</body>

</html>