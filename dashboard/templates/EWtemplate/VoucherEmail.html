<!DOCTYPE html>
{%load static%}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voucher Email</title>
    <link rel="stylesheet" href="{%static 'css/dashboard.css'%}" />
    <link rel="stylesheet" href="{%static 'css/dashboard2.css'%}" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"
  ></script>
</head>
<body>
    <div class="d-flex justify-content-center pt-2">
        <button class="theme-btn px-3 py-2 rounded-1" id="downloadButton">Download</button>
    </div>
    <div style="max-width: 900px;margin-inline: auto;margin-top: 2rem;">
        <div class="" id="invoice-details" style="margin: auto; font-family: 'Poppins', sans-serif;">
            <div class="invoice-content"
                style="height: auto; background-color: white; box-shadow: 0px -1px 3px 1px rgb(204, 200, 200);">
                <div class="view-details" style="background-color: #324969; padding: 1rem;">
                    <div class="mt-3 px-5 py-2 " style="color: white;">
                        <div>
                            <table style="width: 100%;">
                                <tr>
                                    <td style="padding-left: 2rem;">
                                        <img src="{%static 'assets/invchr.png'%}?{% now "U" %}" style="width: 20%;" />
                                        <p style="margin: 5px 0;">7909 151 146</p>
                                        <p style="margin: 5px 0;">www.navigotrips.com</p>
                                        <p style="margin: 5px 0;">Navig trips LLP
                                            [LLPIN ABB - 4601]
                                            Vatakara 
                                            Kozhikode 
                                            Kerala</p>
                                    </td>
                                </tr>
                                <tr>
                                    <td
                                        style="font-size: 1.5rem; font-weight: 600; text-align: right;padding-right: 3rem;white-space: nowrap;">
                                       <span id="num-value">{{ invoice.invoice_number }}</span></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="" style="width: 100%;">
                    <div style="width: 100%;">
                        <table style="width: 100%;">
                            <table style="width: 100%;">
                                <tr>
                                    <td style="font-size: 0.8rem;width: 70%;padding-left: 5rem;padding-top: 2rem;"
                                        colspan="3">
                                        <p style="font-size: 1rem;margin: 0;">Bill To:</p>
                                        <h5 style="font-size: 1.5rem; margin: 0;">{{ invoice.customer.full_name }}</h5>
                                        <p style="margin:5px;">{{ invoice.customer_name.phone }}</p>
                                        <p style="margin:5px;">{{ invoice.customer_name.email }}</p>
                                        <p style="margin:5px;">{{ invoice.customer_name.address }}</p>
                                    </td>
                                    <td
                                        style="width:10px;padding: 0;white-space: nowrap;text-align: right;margin: 0;width: 0%;padding-right: 5rem;padding-top: 2rem;">
                                        <p style="margin:5px;"> {{ invoice.invoice_number }}</p>
                                        <p style="margin:5px;"> Voucher Date: {{ invoice.invoice_date }}</p>
                                        <p
                                            style="background-color: rgb(240, 146, 5);padding: 10px 5px;text-align: center;">
                                            Total Amount <strong> ₹ {{ invoice.total_amount }}</strong></p>
                                    </td>
                                </tr>
                            </table>
                    </div>
                    <div>
                        <table
                            style="width: 80%;border-collapse: collapse;  border: 1px solid black;margin-left: 5rem;text-align: center;text-transform: uppercase;margin-top: 15px;">
                            <tbody>
                                <tr>
                                    <td
                                        style="padding: 0.5rem 2rem;border-bottom: 1px solid black;border-right: 1px solid black;">
                                        hotel name</td>
                                    <td style="padding: 0.5rem 2rem;border-bottom: 1px solid black;">{{ invoice.resort_name.resort_name }}</td>
                                </tr>
                                <tr>
                                    <td
                                        style="padding: 0.5rem 2rem;border-bottom: 1px solid black;border-right: 1px solid black;">
                                        check in</td>
                                    <td style="padding: 0.5rem 2rem;border-bottom: 1px solid black;">{{ invoice.checkin_date }}</td>
                                </tr>
                                <tr>
                                    <td
                                        style="padding: 0.5rem 2rem;border-bottom: 1px solid black;border-right: 1px solid black;">
                                        check out</td>
                                    <td style="padding: 0.5rem 2rem;border-bottom: 1px solid black;">{{ invoice.checkout_date }}</td>
                                </tr>
                                <tr>
                                    <td
                                        style="padding: 0.5rem 2rem;border-bottom: 1px solid black;border-right: 1px solid black;">
                                        no.of pax</td>
                                    <td style="padding: 0.5rem 2rem;border-bottom: 1px solid black;">{{ invoice.adults }} adults and {{ invoice.children }}
                                        children
                                    </td>
                                </tr>
                                <tr>
                                    <td
                                        style="padding: 0.5rem 2rem;border-bottom: 1px solid black;border-right: 1px solid black;">
                                        room type</td>
                                    <td style="padding: 0.5rem 2rem;border-bottom: 1px solid black;">{{ invoice.room_type }}</td>
                                </tr>
                                <tr>
                                    <td
                                        style="padding: 0.5rem 2rem;border-bottom: 1px solid black;border-right: 1px solid black;">
                                        no of rooms</td>
                                    <td style="padding: 0.5rem 2rem;border-bottom: 1px solid black;">{{ invoice.number_of_rooms }}</td>
                                </tr>
                                <tr>
                                    <td
                                        style="padding: 0.5rem 2rem;border-bottom: 1px solid black;border-right: 1px solid black;">
                                        no of nights</td>
                                    <td style="padding: 0.5rem 2rem;border-bottom: 1px solid black;">{{ invoice.number_of_nights }}</td>
                                </tr>
                                <tr>
                                    <td
                                        style="padding: 0.5rem 2rem;border-bottom: 1px solid black;border-right: 1px solid black;">
                                        meal plan</td>
                                    <td style="padding: 0.5rem 2rem;border-bottom: 1px solid black;">{{ invoice.meal_plan.meals }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                        <table style="width: 100%;">
                            <tbody>
                                <tr>
                                    <td>
                                        <p></p>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align: right;padding-right: 5rem;">
                                        <div>
                                            <p style="opacity: 0;">Sub Total :<span style="padding-left: 0.5rem;"> ₹ {{ invoice.sub_total }}</span></p>
                                            <p style="opacity: 0;">Tax : <span style="padding-left: 0.5rem;"> ₹ {{ invoice.tax }}</span></p>
                                            <p style="font-size: 1rem;"><strong>Grand Total : <span style="padding-left: 0.5rem;"> ₹{{ invoice.total_amount }}</span></strong></p>
                                        </div>
                                    </td>
                                </tr>

                                <tr>
                                    <td style="text-align: right;padding-right: 5rem;padding-top: 5rem;">
                                        <div>
                                            <p>{{ invoice.sales_person.username }}</p>
                                            <p class="fw-semibold">Accountant Manager</p>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div style="margin-top: -15rem;padding-left: 5rem;">
                            <p><strong>Payment Methods</strong></p>
                            <p>Bank Name : {{ invoice.account_name.account_name }}</p>
                            <p>Bank Account :  {{ invoice.account_name.account_number }}</p>
                            <p style="margin-top: 10px;padding-bottom: 8rem;" class="fw-bold">Thank you for your
                                business!</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="invoice-content" 
                style="height: auto; background-color: white; box-shadow: 0px -1px 3px 1px rgb(204, 200, 200);">
                <div class="mt-4" style="padding-left:4rem;padding-right: 4rem;">
                    <div>
                        <h4 class="text-uppercase" style="font-size:1.8rem;padding-top:3rem">Terms and Conditions</h4>
                        <ul class="mt-5">
                            <li style="font-size:1rem;padding-bottom: 1rem;">Kindly provide valid ID proofs of all guest
                                at the time of CHECK-IN (mandatory). If you are a
                                foreign guest provide valid Passports and Visa</li>
                            <li style="font-size:1rem;padding-bottom: 1rem;">Balance payment should be done during
                                check-in time.</li>
                            <li style="font-size:1rem;padding-bottom: 1rem;">Early CHECK-IN and late CHECK-OUT are
                                subject
                                to availability.</li>
                            <li style="font-size:1rem;padding-bottom: 1rem;">Alcohol consumptions are not allowed in
                                public areas.</li>
                            <li style="font-size:1rem;padding-bottom: 1rem;">Pets not allowed in this Resort.</li>
                            <li style="font-size:1rem;padding-bottom: 1rem;">Cancellation / No-Show Policy: Full
                                retention
                                for cancellation before 30 days and 50% retention
                                charges </li>
                            <li style="font-size:1rem;padding-bottom: 1rem;">For cancellation done before 15 days to
                                arrival, After that amount non-refundable.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
    <script>
        const numValue = document.getElementById('num-value').textContent
document.getElementById("downloadButton").addEventListener("click", function () {
       const element = document.getElementById("invoice-details");
       const opt = {
           // margin: 0.5,
           filename: `${numValue}.pdf`,
           image: { type: 'jpeg', quality: 1 },
           html2canvas: { scale: 1 },
           jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' },
       };
       html2pdf().from(element).set(opt).save();
   });
    </script>
</body>
</html>